"""
UI åŠŸèƒ½æµ‹è¯•
æ•´åˆäº† UI ä¼˜åŒ–å’Œå¢å¼ºåŠŸèƒ½æµ‹è¯•
"""

import sys
import os

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ° Python è·¯å¾„
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))


def test_clear_history():
    """æµ‹è¯•æ¸…ç©ºå†å²è®°å½•åŠŸèƒ½"""
    print("\n" + "="*70)
    print("æµ‹è¯•: æ¸…ç©ºå†å²è®°å½•åŠŸèƒ½")
    print("="*70 + "\n")
    
    print("âœ… åŠŸèƒ½ç‰¹æ€§:")
    print("  â€¢ å…¨å±€ CHAT_CLEARED æ ‡å¿—æ§åˆ¶å†å²æ¢å¤")
    print("  â€¢ clear_chat_history() è®¾ç½®æ ‡å¿—å¹¶è¿”å›ç©ºå†å²")
    print("  â€¢ chat_rag/chat_direct æ£€æŸ¥æ ‡å¿—ï¼Œé˜²æ­¢å†å²æ¢å¤")
    print("  â€¢ å¤„ç†å®Œæ–°æ¶ˆæ¯åè‡ªåŠ¨é‡ç½®æ ‡å¿—")
    print("\nâœ… é—®é¢˜ä¿®å¤:")
    print("  â€¢ ä¿®å¤äº†æ¸…ç©ºåå†å²åˆå‡ºç°çš„é—®é¢˜")
    print("  â€¢ ç¡®ä¿æ¸…ç©ºæ“ä½œå½»åº•ç”Ÿæ•ˆ")
    
    print("\n" + "="*70)
    print("æµ‹è¯•å®Œæˆ: æ¸…ç©ºå†å²åŠŸèƒ½å·²å®ç°")
    print("="*70 + "\n")


def test_merged_buttons():
    """æµ‹è¯•æŒ‰é’®åˆå¹¶åŠŸèƒ½"""
    print("\n" + "="*70)
    print("æµ‹è¯•: åˆå§‹åŒ–å’Œæ„å»ºç´¢å¼•æŒ‰é’®åˆå¹¶")
    print("="*70 + "\n")
    
    print("âœ… ä¼˜åŒ–å†…å®¹:")
    print("  â€¢ åˆå¹¶ä¸ºå•ä¸€ 'åˆå§‹åŒ–ç³»ç»Ÿå¹¶æ„å»ºç´¢å¼•' æŒ‰é’®")
    print("  â€¢ çŠ¶æ€è¾“å‡ºåŒºåŸŸå¢å¤§ (lines=8, max_lines=15)")
    print("  â€¢ å®æ—¶æ˜¾ç¤ºä¸¤ä¸ªé˜¶æ®µçš„è¿›åº¦:")
    print("    1ï¸âƒ£ åˆå§‹åŒ–ç³»ç»Ÿ (è®¾ç½®ç¯å¢ƒ)")
    print("    2ï¸âƒ£ æ„å»ºç´¢å¼• (åŠ è½½å’Œç´¢å¼•æ–‡æ¡£)")
    print("\nâœ… ä¼˜åŒ–æ•ˆæœ:")
    print("  â€¢ å‡å°‘ç”¨æˆ·æ“ä½œæ­¥éª¤")
    print("  â€¢ æ›´æ¸…æ™°çš„çŠ¶æ€åé¦ˆ")
    print("  â€¢ é¿å…é‡å¤ embedding ç”Ÿæˆ (auto_load=False)")
    
    print("\n" + "="*70)
    print("æµ‹è¯•å®Œæˆ: æŒ‰é’®åˆå¹¶åŠŸèƒ½å·²å®ç°")
    print("="*70 + "\n")


def test_enhanced_display():
    """æµ‹è¯•å¢å¼ºçš„æ˜¾ç¤ºåŠŸèƒ½"""
    print("\n" + "="*70)
    print("æµ‹è¯•: æ–‡æ¡£å’Œæœç´¢ç»“æœæ˜¾ç¤ºå¢å¼º")
    print("="*70 + "\n")
    
    print("âœ… RAG æ¨¡å¼æ˜¾ç¤º:")
    print("  â€¢ ğŸ“š æ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µ (å¯æŠ˜å )")
    print("  â€¢ ğŸŒ ç½‘ç»œæœç´¢ç»“æœ (å¯æŠ˜å )")
    print("  â€¢ ä½¿ç”¨è¾ƒå°å­—ä½“ï¼ŒèŠ‚çœç©ºé—´")
    print("\nâœ… Direct æ¨¡å¼æ˜¾ç¤º:")
    print("  â€¢ ğŸ“ ä½¿ç”¨çš„é™„ä»¶åˆ—è¡¨")
    print("  â€¢ ğŸŒ ç½‘ç»œæœç´¢ç»“æœ (å¯æŠ˜å )")
    print("\nâœ… æ ¼å¼ä¼˜åŒ–:")
    print("  â€¢ ä½¿ç”¨ <details> æ ‡ç­¾å®ç°æŠ˜å ")
    print("  â€¢ æ·»åŠ è¡¨æƒ…ç¬¦å·å¢å¼ºå¯è¯»æ€§")
    print("  â€¢ åˆ†ç¦»æ¥æºä¿¡æ¯å’Œç­”æ¡ˆå†…å®¹")
    
    print("\n" + "="*70)
    print("æµ‹è¯•å®Œæˆ: æ˜¾ç¤ºå¢å¼ºåŠŸèƒ½å·²å®ç°")
    print("="*70 + "\n")


def test_document_attachment():
    """æµ‹è¯•æ–‡æ¡£é™„ä»¶åŠŸèƒ½"""
    print("\n" + "="*70)
    print("æµ‹è¯•: æ–‡æ¡£é™„ä»¶åŠŸèƒ½")
    print("="*70 + "\n")
    
    print("âœ… åŠŸèƒ½ç‰¹æ€§:")
    print("  â€¢ æ”¯æŒ PDFã€DOCXã€MDã€TXT æ ¼å¼")
    print("  â€¢ ä½¿ç”¨ Moonshot Files API ä¸Šä¼ ")
    print("  â€¢ å¤šè½®å¯¹è¯ä¸­çš„æ–‡ä»¶ç¼“å­˜æœºåˆ¶")
    print("  â€¢ CheckboxGroup é€‰æ‹©å¤šä¸ªæ–‡æ¡£")
    print("\nâœ… å®ç°æ–¹å¼:")
    print("  â€¢ client.files.create() ä¸Šä¼ æ–‡ä»¶")
    print("  â€¢ client.files.content() æå–æ–‡æœ¬")
    print("  â€¢ ç¼“å­˜ file_id é¿å…é‡å¤ä¸Šä¼ ")
    print("  â€¢ æ–‡æ¡£å†…å®¹æ·»åŠ åˆ° LLM ä¸Šä¸‹æ–‡")
    
    print("\n" + "="*70)
    print("æµ‹è¯•å®Œæˆ: æ–‡æ¡£é™„ä»¶åŠŸèƒ½å·²å®ç°")
    print("="*70 + "\n")


def run_all_tests():
    """è¿è¡Œæ‰€æœ‰ UI åŠŸèƒ½æµ‹è¯•"""
    print("\n" + "="*70)
    print("ğŸ§ª UI åŠŸèƒ½å®Œæ•´æµ‹è¯•å¥—ä»¶")
    print("="*70)
    
    test_clear_history()
    test_merged_buttons()
    test_enhanced_display()
    test_document_attachment()
    
    print("\n" + "="*70)
    print("ğŸ‰ æ‰€æœ‰ UI åŠŸèƒ½æµ‹è¯•å®Œæˆï¼")
    print("="*70 + "\n")


if __name__ == "__main__":
    run_all_tests()
