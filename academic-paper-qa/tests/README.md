# æµ‹è¯•è¯´æ˜

æœ¬æ–‡æ¡£æè¿°é¡¹ç›®çš„æµ‹è¯•ç»„ç»‡å’Œè¿è¡Œæ–¹å¼ã€‚

---

## ğŸ“‹ æµ‹è¯•æ–‡ä»¶ç»„ç»‡

### å‘½åè§„èŒƒ

æµ‹è¯•æ–‡ä»¶æŒ‰ç…§ `test_[category]_[component].py` å‘½åï¼š

| ç±»åˆ« | å‰ç¼€ | ç¤ºä¾‹ |
|------|------|------|
| æ¨¡å—æµ‹è¯• | `test_[module]_` | `test_agent_core.py` |
| åŠŸèƒ½æµ‹è¯• | `test_features_` | `test_features_web_search.py` |
| é›†æˆæµ‹è¯• | `test_integration_` | `test_integration_full.py` |
| åŠ è½½å™¨æµ‹è¯• | `test_loader_` | `test_loader_documents.py` |

---

## ğŸ§ª æµ‹è¯•æ–‡ä»¶åˆ—è¡¨

### 1. test_agent_core.py
**æµ‹è¯•èŒƒå›´**: Agent æ ¸å¿ƒåŠŸèƒ½

**æµ‹è¯•å†…å®¹**:
- âœ… Agent åˆå§‹åŒ–
- âœ… ç´¢å¼•æ„å»ºå’ŒåŠ è½½
- âœ… é—®ç­”æŸ¥è¯¢åŠŸèƒ½
- âœ… è®ºæ–‡åˆ—è¡¨å’Œç»Ÿè®¡
- âœ… é”™è¯¯å¤„ç†

**è¿è¡Œæ–¹å¼**:
```bash
python tests/test_agent_core.py
```

**ä¾èµ–**:
- éœ€è¦é…ç½® `.env` æ–‡ä»¶
- éœ€è¦æµ‹è¯•æ–‡æ¡£åœ¨ `data/documents/`

---

### 2. test_loader_documents.py
**æµ‹è¯•èŒƒå›´**: æ–‡æ¡£åŠ è½½å™¨

**æµ‹è¯•å†…å®¹**:
- âœ… PDF æ–‡æ¡£åŠ è½½
- âœ… DOCX æ–‡æ¡£åŠ è½½
- âœ… Markdown æ–‡æ¡£åŠ è½½
- âœ… æ–‡æœ¬æ¸…ç†åŠŸèƒ½
- âœ… å…ƒæ•°æ®æå–
- âœ… é”™è¯¯å¤„ç†

**è¿è¡Œæ–¹å¼**:
```bash
python tests/test_loader_documents.py
```

**ä¾èµ–**:
- æµ‹è¯•æ–‡æ¡£ï¼ˆPDF/DOCX/MDï¼‰

---

### 3. test_features_web_search.py
**æµ‹è¯•èŒƒå›´**: ç½‘ç»œæœç´¢åŠŸèƒ½

**æµ‹è¯•å†…å®¹**:
- âœ… ç½‘ç»œæœç´¢é…ç½®
- âœ… `query_direct()` æ–¹æ³•å­˜åœ¨æ€§
- âœ… `query()` æ–¹æ³•ç­¾åæ›´æ–°
- âœ… WebSearchTool å¯ç”¨æ€§
- âœ… duckduckgo-search ä¾èµ–

**è¿è¡Œæ–¹å¼**:
```bash
python tests/test_features_web_search.py
```

**ä¾èµ–**:
- éœ€è¦å®‰è£… `duckduckgo-search`

---

### 4. test_integration_full.py
**æµ‹è¯•èŒƒå›´**: å®Œæ•´ç³»ç»Ÿé›†æˆ

**æµ‹è¯•å†…å®¹**:
- âœ… æ¨¡å—å¯¼å…¥æµ‹è¯•
- âœ… é…ç½®ç³»ç»Ÿæµ‹è¯•
- âœ… æ–‡æ¡£åŠ è½½æµç¨‹
- âœ… Agent å®Œæ•´å·¥ä½œæµ
- âœ… ç³»ç»Ÿä¿¡æ¯éªŒè¯

**è¿è¡Œæ–¹å¼**:
```bash
python tests/test_integration_full.py
```

**ä¾èµ–**:
- å®Œæ•´çš„ç¯å¢ƒé…ç½®
- æ‰€æœ‰ä¾èµ–åŒ…å®‰è£…

---

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
# è¿è¡Œ Agent æ ¸å¿ƒæµ‹è¯•
python tests/test_agent_core.py

# è¿è¡Œæ–‡æ¡£åŠ è½½å™¨æµ‹è¯•
python tests/test_loader_documents.py

# è¿è¡ŒåŠŸèƒ½æµ‹è¯•
python tests/test_features_web_search.py

# è¿è¡Œå®Œæ•´é›†æˆæµ‹è¯•
python tests/test_integration_full.py
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
# æ–¹å¼ 1: ä½¿ç”¨ bash å¾ªç¯
for test in tests/test_*.py; do
    echo "Running $test..."
    python "$test"
done

# æ–¹å¼ 2: ä½¿ç”¨ pytest (å¦‚æœå®‰è£…)
pytest tests/
```

---

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### æ¨¡å—è¦†ç›–

| æ¨¡å— | æµ‹è¯•æ–‡ä»¶ | è¦†ç›–ç‡ |
|------|---------|-------|
| `config/` | `test_integration_full.py` | é«˜ |
| `src/agent.py` | `test_agent_core.py` | é«˜ |
| `src/loaders/` | `test_loader_documents.py` | é«˜ |
| `src/tools/` | `test_features_web_search.py` | ä¸­ |
| `main.py` | `test_integration_full.py` | ä¸­ |

### åŠŸèƒ½è¦†ç›–

| åŠŸèƒ½ | æµ‹è¯•æ–‡ä»¶ | çŠ¶æ€ |
|------|---------|------|
| RAG é—®ç­” | `test_agent_core.py` | âœ… |
| å¯¹è¯æ¨¡å¼ | `test_features_web_search.py` | âœ… |
| æ–‡æ¡£åŠ è½½ | `test_loader_documents.py` | âœ… |
| ç½‘ç»œæœç´¢ | `test_features_web_search.py` | âœ… |
| ç´¢å¼•æ„å»º | `test_agent_core.py` | âœ… |

---

## ğŸ› ï¸ ç¼–å†™æµ‹è¯•çš„æœ€ä½³å®è·µ

### 1. æµ‹è¯•æ–‡ä»¶ç»“æ„
```python
#!/usr/bin/env python3
"""
[æµ‹è¯•èŒƒå›´æè¿°]

æµ‹è¯• [æ¨¡å—/åŠŸèƒ½] çš„ [å…·ä½“å†…å®¹]
"""

import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent.parent))

# å¯¼å…¥è¢«æµ‹è¯•çš„æ¨¡å—


def test_åŠŸèƒ½1():
    """æµ‹è¯• [åŠŸèƒ½æè¿°]"""
    print("=" * 60)
    print("æµ‹è¯• X: [æµ‹è¯•åç§°]")
    print("=" * 60)
    
    # æµ‹è¯•ä»£ç 
    
    print("âœ“ æµ‹è¯•é€šè¿‡\n")


def main():
    """è¿è¡Œæ‰€æœ‰æµ‹è¯•"""
    print("\n" + "=" * 60)
    print("[æµ‹è¯•å¥—ä»¶åç§°]")
    print("=" * 60 + "\n")
    
    try:
        test_åŠŸèƒ½1()
        # ... æ›´å¤šæµ‹è¯•
        
        print("=" * 60)
        print("âœ“ æ‰€æœ‰æµ‹è¯•å®Œæˆ")
        print("=" * 60)
        return True
        
    except Exception as e:
        print(f"\nâœ— æµ‹è¯•å¤±è´¥: {e}")
        import traceback
        traceback.print_exc()
        return False


if __name__ == "__main__":
    success = main()
    sys.exit(0 if success else 1)
```

### 2. å‘½åçº¦å®š
- âœ… æµ‹è¯•å‡½æ•°ä»¥ `test_` å¼€å¤´
- âœ… æè¿°æ€§çš„å‡½æ•°åï¼š`test_agent_initialization()`
- âœ… æ¸…æ™°çš„æ‰“å°è¾“å‡ºè¯´æ˜æµ‹è¯•å†…å®¹

### 3. æµ‹è¯•ç‹¬ç«‹æ€§
- âœ… æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
- âœ… ä¸ä¾èµ–å…¶ä»–æµ‹è¯•çš„æ‰§è¡Œé¡ºåº
- âœ… ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶/ç›®å½•é¿å…æ±¡æŸ“ç¯å¢ƒ

### 4. é”™è¯¯å¤„ç†
- âœ… ä½¿ç”¨ try-except æ•è·å¼‚å¸¸
- âœ… æ‰“å°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- âœ… è¿”å›æ˜ç¡®çš„æˆåŠŸ/å¤±è´¥çŠ¶æ€

---

## ğŸ” æµ‹è¯•åœºæ™¯

### æ­£å¸¸åœºæ™¯æµ‹è¯•
æµ‹è¯•åŠŸèƒ½åœ¨æ­£å¸¸è¾“å…¥ä¸‹çš„è¡Œä¸ºï¼š
- âœ… æ ‡å‡†æ–‡æ¡£åŠ è½½
- âœ… å…¸å‹é—®ç­”æŸ¥è¯¢
- âœ… å¸¸è§„é…ç½®

### è¾¹ç•Œåœºæ™¯æµ‹è¯•
æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼š
- âœ… ç©ºæ–‡æ¡£
- âœ… è¶…å¤§æ–‡æ¡£
- âœ… ç‰¹æ®Šå­—ç¬¦

### é”™è¯¯åœºæ™¯æµ‹è¯•
æµ‹è¯•é”™è¯¯å¤„ç†ï¼š
- âœ… æ–‡ä»¶ä¸å­˜åœ¨
- âœ… æ ¼å¼é”™è¯¯
- âœ… é…ç½®ç¼ºå¤±

---

## ğŸ“ æµ‹è¯•æ£€æŸ¥æ¸…å•

### æ·»åŠ æ–°åŠŸèƒ½æ—¶
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™é›†æˆæµ‹è¯•ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æµ‹è¯•æ­£å¸¸åœºæ™¯
- [ ] æµ‹è¯•è¾¹ç•Œåœºæ™¯
- [ ] æµ‹è¯•é”™è¯¯å¤„ç†
- [ ] æ›´æ–°æµ‹è¯•æ–‡æ¡£

### ä¿®å¤ Bug æ—¶
- [ ] æ·»åŠ é‡ç° Bug çš„æµ‹è¯•ç”¨ä¾‹
- [ ] ç¡®è®¤æµ‹è¯•å¤±è´¥
- [ ] ä¿®å¤ Bug
- [ ] ç¡®è®¤æµ‹è¯•é€šè¿‡
- [ ] æ£€æŸ¥ç›¸å…³æµ‹è¯•

### é‡æ„ä»£ç æ—¶
- [ ] ç¡®ä¿ç°æœ‰æµ‹è¯•é€šè¿‡
- [ ] é‡æ„ä»£ç 
- [ ] å†æ¬¡è¿è¡Œæ‰€æœ‰æµ‹è¯•
- [ ] æ›´æ–°è¿‡æ—¶çš„æµ‹è¯•

---

## ğŸ¯ æµ‹è¯•å¼€å‘æŒ‡å—

### ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•

1. **ç¡®å®šæµ‹è¯•èŒƒå›´**
   ```
   åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ
   â”œâ”€â”€ å•ä¸ªæ¨¡å— â†’ test_[module]_[component].py
   â”œâ”€â”€ æ–°åŠŸèƒ½ â†’ test_features_[feature].py
   â””â”€â”€ è·¨æ¨¡å— â†’ test_integration_[scope].py
   ```

2. **ç¼–å†™æµ‹è¯•æ–‡ä»¶**
   ```bash
   # åˆ›å»ºæµ‹è¯•æ–‡ä»¶
   touch tests/test_[category]_[component].py
   
   # ç¼–å†™æµ‹è¯•ç”¨ä¾‹
   # å‚è€ƒç°æœ‰æµ‹è¯•æ–‡ä»¶çš„ç»“æ„
   ```

3. **è¿è¡Œæµ‹è¯•éªŒè¯**
   ```bash
   # è¿è¡Œæ–°æµ‹è¯•
   python tests/test_[category]_[component].py
   
   # ç¡®ä¿é€šè¿‡
   # å¦‚æœå¤±è´¥ï¼Œè°ƒè¯•ä¿®å¤
   ```

4. **é›†æˆåˆ°æµ‹è¯•å¥—ä»¶**
   - æ›´æ–°æœ¬æ–‡æ¡£
   - åœ¨ CI/CD ä¸­æ·»åŠ ï¼ˆå¦‚æœæœ‰ï¼‰

---

## ğŸ”§ æµ‹è¯•ç¯å¢ƒé…ç½®

### æœ€å°é…ç½®
```bash
# .env æœ€å°é…ç½®
LLM_API_KEY=test_key
LLM_API_BASE=https://api.example.com/v1
LLM_MODEL=test-model
EMBEDDING_PROVIDER=huggingface
```

### å®Œæ•´é…ç½®
ä½¿ç”¨ `.env.example` ä½œä¸ºæ¨¡æ¿

### æµ‹è¯•æ•°æ®
```bash
# å‡†å¤‡æµ‹è¯•æ–‡æ¡£
data/documents/
â”œâ”€â”€ test.pdf       # æµ‹è¯• PDF
â”œâ”€â”€ test.docx      # æµ‹è¯• DOCX
â””â”€â”€ test.md        # æµ‹è¯• Markdown
```

---

## ğŸ“ˆ æŒç»­æ”¹è¿›

### æµ‹è¯•è´¨é‡æŒ‡æ ‡
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æœ‰æµ‹è¯•è¦†ç›–
- âœ… æµ‹è¯•é€šè¿‡ç‡ 100%
- âœ… æµ‹è¯•æ‰§è¡Œæ—¶é—´åˆç†
- âœ… æµ‹è¯•æ–‡æ¡£ä¿æŒæ›´æ–°

### æœªæ¥è®¡åˆ’
- [ ] æ·»åŠ æ€§èƒ½æµ‹è¯•
- [ ] æ·»åŠ å‹åŠ›æµ‹è¯•
- [ ] é›†æˆ pytest æ¡†æ¶
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š
- [ ] ä»£ç è¦†ç›–ç‡ç»Ÿè®¡

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ç¯å¢ƒé…ç½®æ­£ç¡®
3. æ£€æŸ¥æµ‹è¯•æ•°æ®æ˜¯å¦å­˜åœ¨
4. æŸ¥çœ‹ç›¸å…³æ¨¡å—æ˜¯å¦æœ‰æ›´æ–°

### Q: å¦‚ä½•è°ƒè¯•æµ‹è¯•ï¼Ÿ
A:
```python
# æ·»åŠ è°ƒè¯•è¾“å‡º
print(f"Debug: {variable}")

# ä½¿ç”¨ pdb è°ƒè¯•å™¨
import pdb; pdb.set_trace()
```

### Q: æµ‹è¯•è¿è¡Œå¾ˆæ…¢ï¼Ÿ
A:
- åªè¿è¡Œç›¸å…³çš„æµ‹è¯•æ–‡ä»¶
- ä½¿ç”¨æµ‹è¯•æ•°æ®çš„å°æ ·æœ¬
- è€ƒè™‘æ·»åŠ æµ‹è¯•ç¼“å­˜

---

**ç»´æŠ¤è€…**: æµ‹è¯•å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-12-20
