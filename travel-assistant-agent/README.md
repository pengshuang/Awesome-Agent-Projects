# 🌏 智能旅游助手 Agent 系统

> 基于大模型的智能旅游规划助手 | Gradio 界面 | 多模态交互 | 一键启动

## 📋 项目简介

智能旅游助手是一个功能完整、开箱即用的 AI 旅游规划系统,采用 Gradio 4.x 框架搭建,通过调用阿里云千问大模型 API 实现强大的 AI 能力。这不是简单的问答机器人,而是具备**主动规划、场景适配、动态优化**能力的专业旅游智能体。

### ✨ 核心特性

- **🤖 智能 Agent 能力** - 主动需求挖掘、多方案规划、场景适配、动态调整
- **🖼️ 多模态交互** - 文本对话 + 图片识别（景点、美食、地图等）
- **🎯 专业旅游规划** - 行程规划、景点推荐、酒店美食、预算分析
- **👥 场景智能适配** - 自动识别亲子游、老年游、学生穷游、情侣游等场景
- **💾 行程管理** - 保存、导出、清空对话,方便管理
- **🎨 现代化界面** - 清新旅游主题,响应式设计,全设备适配

### 🛠️ 技术栈

- **前端框架**: Gradio 4.x
- **大模型**: 阿里云千问（qwen3-max 文本 / qwen-vl-plus 视觉）
- **开发语言**: Python 3.10+
- **配置管理**: python-dotenv

---

## 🚀 快速开始

### 1️⃣ 环境要求

```bash
Python 3.10+
阿里云千问 API Key
```

### 2️⃣ 安装依赖

```bash
cd travel-assistant-agent
pip install -r requirements.txt
```

### 3️⃣ 配置 API

```bash
# 复制环境变量示例文件
cp .env.example .env

# 编辑 .env 文件,填入您的 API 配置
```

**.env 配置示例：**

```env
# 阿里云千问 API 配置
API_KEY=sk-xxxxxxxxxxxxx
API_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
TEXT_MODEL_NAME=qwen3-max
MULTIMODAL_MODEL_NAME=qwen-vl-plus

# 模型参数
MAX_TOKENS=1500
TEMPERATURE=0.85

# 超时和重试配置
TEXT_API_TIMEOUT=60
MULTIMODAL_API_TIMEOUT=90
MAX_RETRIES=3
```

### 4️⃣ 启动应用

```bash
# 方式1：直接运行
python app.py

# 方式2：使用启动脚本（推荐）
chmod +x start.sh
./start.sh
```

启动成功后,浏览器会自动打开应用（默认地址：http://localhost:7860）

---

## 💡 核心功能

### 🤖 智能 Agent 能力

#### 1. 主动需求挖掘
当用户信息不完整时,Agent 会友好地追问关键信息：
- 目的地在哪里？
- 计划玩几天？
- 几个人出行？有老人或小孩吗？
- 预算范围是多少？
- 更喜欢什么风格（自然风光/历史文化/美食等）？

#### 2. 多方案最优规划
自动生成 2-3 套差异化方案,包含：
- **方案特点**: 经典打卡版/小众秘境版/亲子轻松版/穷游省钱版
- **总预算**: 详细的费用估算
- **适配人群**: 适合哪类旅行者
- **优缺点对比**: 帮助用户做出最优选择

#### 3. 场景智能适配
自动识别用户场景并适配专属方案：
- **亲子游**: 低强度、安全性高、有儿童设施
- **老年游**: 慢节奏、无爬山、医疗便利
- **学生穷游**: 青旅住宿、公共交通、免费景点
- **情侣游**: 浪漫景点、精致餐厅、特色民宿
- **轻奢游**: 五星酒店、米其林餐厅、专车接送
- **境外游**: 签证、货币、语言、交通信息

#### 4. 动态优化调整
根据用户反馈实时调整行程：
- "行程太赶了" → 减少景点,增加休息时间
- "预算超了" → 调整住宿和餐饮档次
- "想加个景点" → 重新规划路线和时间
- "改成4天" → 扩展或压缩行程

### 🖼️ 多模态交互

#### 图片识别
- **支持类型**: 景点照片、美食图片、酒店外观、地图截图
- **识别能力**: 自动识别并提供详细攻略
- **支持格式**: JPG、PNG、WEBP
- **应用场景**: 
  - 上传景点照片 → 获取景点介绍、门票、开放时间
  - 上传美食图片 → 获取菜品推荐、餐厅位置
  - 上传地图截图 → 优化路线规划

### 💾 行程管理

- **保存行程**: 一键保存为 Markdown 文件（`data/saved_itineraries/`）
- **导出行程**: 导出为纯文本格式,方便分享
- **清空对话**: 开始新的旅游规划

---

## 📚 文档导航

- **[用户使用指南](docs/USER_GUIDE.md)** - 详细的使用教程和示例
- **[开发者指南](docs/DEVELOPER_GUIDE.md)** - 二次开发和模块说明
- **[架构设计文档](docs/ARCHITECTURE.md)** - 系统架构和设计原理
- **[API 测试指南](API_TEST_GUIDE.md)** - API 调用测试方法

---

## ⚙️ 配置说明

### 环境变量配置（.env）

| 变量名 | 说明 | 默认值 |
|--------|------|--------|
| `API_KEY` | 阿里云千问 API 密钥 | *必填* |
| `API_BASE_URL` | API 服务地址 | https://dashscope.aliyuncs.com/compatible-mode/v1 |
| `TEXT_MODEL_NAME` | 文本模型名称 | qwen3-max |
| `MULTIMODAL_MODEL_NAME` | 多模态模型名称 | qwen-vl-plus |
| `MAX_TOKENS` | 最大生成 token 数 | 1500 |
| `TEMPERATURE` | 生成温度（0-1） | 0.85 |
| `TEXT_API_TIMEOUT` | 文本 API 超时（秒） | 60 |
| `MULTIMODAL_API_TIMEOUT` | 多模态 API 超时（秒） | 90 |
| `MAX_RETRIES` | 最大重试次数 | 3 |

### 模型参数调优建议

- **MAX_TOKENS**: 控制回复长度,1500 适合大部分场景,避免超时
- **TEMPERATURE**: 0.85 适合创意规划,0.7 适合事实性回答
- **超时设置**: 网络较慢时可适当增加超时时间
- **重试次数**: 3 次重试可有效应对网络波动

---

## 🔧 常见问题

### Q1: 如何获取阿里云千问 API Key?

1. 访问 [阿里云百炼平台](https://bailian.console.aliyun.com/)
2. 注册并开通千问服务
3. 在"API-KEY管理"中创建 API Key

### Q2: 请求超时怎么办?

1. 检查网络连接是否稳定
2. 增加 `.env` 中的超时时间（TEXT_API_TIMEOUT / MULTIMODAL_API_TIMEOUT）
3. 减少 MAX_TOKENS 参数（推荐 1500）

### Q3: 图片识别不准确?

1. 确保图片清晰、光线充足
2. 图片大小建议在 1-5MB 之间
3. 避免上传过于复杂的场景

### Q4: 如何切换到其他模型?

修改 `.env` 文件中的模型配置：
- qwen-turbo（更快、更便宜）
- qwen-plus（平衡性能）
- qwen-max（最强性能）

---

## 📈 后续规划

- [ ] 支持更多大模型（OpenAI、Claude、DeepSeek 等）
- [ ] 集成真实的语音识别和合成 API
- [ ] 增加多人协同规划功能
- [ ] 实时天气和交通信息集成
- [ ] 行程分享和社区功能

---

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源协议。

---

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

如有问题或建议,请通过 GitHub Issues 联系我们。

---

**✨ 开始你的智能旅游规划之旅吧！**
