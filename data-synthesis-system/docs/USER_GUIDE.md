# 用户使用指南

> 本指南面向普通用户，详细说明如何使用Multi-Agent数据合成系统。

---

## 📋 目录

- [快速上手](#快速上手)
- [界面介绍](#界面介绍)  
- [参数说明](#参数说明)
- [使用技巧](#使用技巧)
- [常见问题](#常见问题)

---

## 🚀 快速上手

### 第一步：准备文档

准备需要生成问答对的文档内容，可以是：
- 📚 技术文档、学术论文
- 📖 教材章节、培训资料  
- 💼 业务知识库、产品文档
- 📰 新闻文章、研究报告

**文档要求**：
- ✅ 最少10个字符
- ✅ 内容清晰、逻辑完整
- ✅ 包含足够信息支持问答生成

### 第二步：启动系统

```bash
python web_ui.py
```

浏览器访问：http://localhost:7860

### 第三步：输入文档

**方式一：直接粘贴**
- 在"输入文档内容"文本框中粘贴文本

**方式二：上传文件**
- 点击"或上传文档文件"
- 支持 `.txt` 和 `.md` 格式

**方式三：使用示例**
- 点击"💡 快速开始"下的示例按钮
- 🎓 学术报告、🔢 理科试题、📰 时事新闻、📖 文学小说

### 第四步：配置参数

**基础配置**：
1. **任务类型**：选择数据类型
   - 🧠 逻辑推理类
   - 🔢 数值计算类
   - 📚 信息查询类
   - 📝 总结摘要类

2. **最大迭代次数**：建议10-50次
   - 次数越多，生成数据越多
   - 但耗时也越长

**高级配置**：
3. **Temperature**（0.0-2.0）：
   - 0.7（推荐）：平衡创造性和稳定性
   - 0.3：更确定的输出
   - 1.5：更多样化的输出

4. **评分阈值**（1.0-10.0）：
   - 7.0（推荐）：严格质量控制
   - 5.0：宽松，产出更多
   - 9.0：极严格，产出较少

### 第五步：开始合成

点击 **"🚀 开始合成"** 按钮

系统开始工作，实时显示：
- 📊 统计信息（进度、成功率、难度）
- ⏱️ 已运行时间（带转动图标）
- 🔄 实时迭代过程
- ✅ 通过验证的问答对

### 第六步：查看和下载

**查看结果**：
- 切换到"✅ 通过验证的问答对"标签页
- 点击问答卡片可展开查看详情

**下载结果**：
- 切换到"📥 下载结果"标签页
- 点击下载JSON格式文件

**停止任务**：
- 点击"⏹️ 停止"按钮随时中断
- 已生成的数据会自动保存

---

## 🖥️ 界面介绍

### 左侧：输入配置区

- **文档内容**：文本输入或文件上传
- **快速示例**：一键加载示例文档
- **任务配置**：类型、迭代次数、参数
- **执行按钮**：开始/停止/清除

### 右侧：执行结果区

**📊 实时统计面板**：
- 🔄 已运行时间（运行中有转动图标）
- 进度条：当前轮次/总轮次
- ✅ 成功生成数量
- ❌ 失败次数
- 📈 成功率
- ⭐ 平均难度

**📑 标签页**：

1. **🔄 实时迭代过程**
   - 展示每轮迭代的详细过程
   - 📝 提议者：生成问题
   - 🔍 求解者：求解问题
   - ✅ 验证者：评分验证

2. **✅ 通过验证的问答对**
   - 可折叠的问答卡片
   - 显示迭代轮次和评分

3. **⚙️ Prompts配置**
   - 修改三个Agent的提示词
   - 实时生效，便于测试

4. **📥 下载结果**
   - 下载JSON格式文件

---

## ⚙️ 参数说明

### 任务类型

| 类型 | 说明 | 示例 |
|------|------|------|
| 🧠 逻辑推理 | 多步推理、因果分析 | "如果A则B，如果B则C，那么？" |
| 🔢 数值计算 | 数学计算、数据分析 | "计算复利和投资回报率" |
| 📚 信息查询 | 查找、整合信息 | "文档中的关键事件有哪些？" |
| 📝 总结摘要 | 概括、提炼内容 | "总结文章的主要观点" |

### Temperature（生成随机性）

| 值 | 效果 | 适用场景 |
|----|------|----------|
| 0.0-0.3 | 确定性强，输出稳定 | 数值计算类 |
| 0.4-0.7 | 平衡创造性和稳定性 | ⭐ 推荐（通用） |
| 0.8-1.2 | 较高创造性 | 逻辑推理类 |
| 1.3-2.0 | 高度随机 | ⚠️ 实验性 |

### 评分阈值

| 阈值 | 严格程度 | 产出量 | 适用场景 |
|------|----------|--------|----------|
| 9-10分 | 极严格 | 很少 | 极高质量要求 |
| 7-8分 | 严格 | 适中 | ⭐ 推荐 |
| 5-6分 | 宽松 | 较多 | 快速产出 |
| 1-4分 | 极宽松 | 很多 | ⚠️ 不建议 |

### 最大迭代次数

| 次数 | 耗时 | 产出量 | 适用场景 |
|------|------|--------|----------|
| 1-5次 | 1-3分钟 | 少量 | 快速测试 |
| 10-20次 | 5-10分钟 | 适中 | ⭐ 推荐 |
| 20-50次 | 10-30分钟 | 大量 | 批量生产 |
| 50-100次 | 30分钟+ | 海量 | 长时间运行 |

---

## 💡 使用技巧

### 提高生成质量

1. **准备优质文档**
   - ✅ 内容完整、逻辑清晰
   - ✅ 包含足够细节和例子
   - ❌ 避免过于简短或片段化

2. **合理设置阈值**
   - 初次使用：6.0-7.0
   - 正式使用：7.0-8.0
   - 高要求：8.0-9.0

3. **优化Prompt**
   - 进入"⚙️ Prompts配置"
   - 根据任务类型调整
   - 实时测试观察效果

### 提高生成速度

1. **使用更快的模型**（编辑`.env`）
   ```bash
   MODEL_NAME=gpt-3.5-turbo
   ```

2. **降低迭代次数**（5-10次测试）

3. **批量处理**（使用命令行工具）
   ```bash
   python cli.py --input doc.md --task-type logical --iterations 20
   ```

### 批处理示例

```bash
# 批量处理多个文档
for file in data/*.md; do
    python cli.py --input "$file" --task-type query --iterations 15
done
```

---

## ❓ 常见问题

### Q1: 为什么没有生成任何问答对？

**可能原因**：
- 评分阈值过高
- 文档内容不适合
- Temperature设置不当

**解决方案**：
- 降低阈值到6.0-7.0
- 检查文档质量
- 调整Temperature到0.7

### Q2: 生成速度很慢怎么办？

**解决方案**：
- 切换到gpt-3.5-turbo（编辑`.env`）
- 使用国内API中转服务
- 减少迭代次数

### Q3: 如何判断生成质量？

**评估方法**：
1. 查看评分（8分以上为优质）
2. 人工抽查问答对
3. 观察"平均难度"指标

### Q4: 如何处理JSON文件？

```python
import json

# 读取
with open('output.json', 'r', encoding='utf-8') as f:
    qa_pairs = json.load(f)

# 筛选高分数据
high_quality = [qa for qa in qa_pairs if qa['score'] >= 8.0]

# 转换格式
training_data = [
    {"instruction": qa["question"], "output": qa["answer"]}
    for qa in high_quality
]
```

### Q5: 可以暂停和恢复吗？

- ✅ 可以随时停止（数据自动保存）
- ❌ 暂不支持断点续传

**建议**：分批次运行（每次10-20轮）

### Q6: 支持其他语言吗？

- 主要支持中文
- 理论上支持任何LLM支持的语言
- 可能需要调整Prompt模板

---

## 📞 获取帮助

1. 📖 查看 [开发指南](DEVELOPER_GUIDE.md)
2. 📖 查看 [架构文档](../ARCHITECTURE.md)
3. 🐛 提交 Issue
4. 💬 参与讨论

---

**祝使用愉快！** 🎉
