# 用户使用指南

本指南面向普通用户，详细说明如何使用 Multi-Agent 数据合成系统生成高质量问答数据。

---

## 目录

- [快速上手](#快速上手)
- [界面说明](#界面说明)
- [参数配置](#参数配置)
- [任务类型](#任务类型)
- [常见问题](#常见问题)

---

## 快速上手

### 1. 准备文档

准备好需要生成问答对的文档内容，可以是：
- 技术文档
- 学术论文
- 教材章节
- 业务知识库

**文档要求**：
- 最少10个字符
- 内容清晰、结构完整
- 包含足够信息支持问答生成

### 2. 访问系统

启动系统后，浏览器访问：http://localhost:7860

### 3. 输入文档

**方式一：直接粘贴**
- 在"输入文档内容"文本框中粘贴文本

**方式二：上传文件**
- 点击"上传文档文件"
- 选择 .txt 或 .md 文件

### 4. 配置参数

**基础配置**：
- **任务类型**：选择数据类型（逻辑推理/数值计算/信息查询/总结摘要）
- **最大迭代次数**：5-15次（推荐10次）

**高级配置**：
- **Temperature**：0.0-2.0（推荐0.7）
  - 较低值：更确定性的输出
  - 较高值：更多样化的输出
- **评分阈值**：1.0-10.0（推荐7.0）
  - 设置质量筛选标准
  - 只保留达到阈值的问答对

### 5. 开始合成

点击"🚀 开始合成"按钮，系统开始工作。

### 6. 实时监控

**"实时迭代过程"标签页**：
- 查看每轮迭代的详细过程
- 三个Agent的输出用不同颜色区分
- 可下拉滚动查看历史

**"通过验证的问答对"标签页**：
- 查看最终通过验证的问答对
- 包含评分信息

### 7. 停止/下载

- **停止**：点击"⏹️ 停止"按钮随时中断
- **下载**：完成后点击下载JSON文件

---

## 界面说明

### 左侧：输入配置区

1. **文档内容**
   - 文本输入框：直接粘贴内容
   - 文件上传：支持 .txt 和 .md

2. **任务配置**
   - 任务类型选择
   - 最大迭代次数
   - Temperature滑块
   - 评分阈值滑块

3. **执行按钮**
   - 🚀 开始合成
   - ⏹️ 停止
   - 🔄 清除

### 右侧：执行结果区

**状态显示**：
- 当前进度
- 有效问答对数量
- 验证失败次数
- 执行时间
- 实时日志

**标签页**：
1. **🔄 实时迭代过程**
   - 📝 提议者（红色背景）：生成问题
   - 🔍 求解者（蓝色背景）：求解问题
   - ✅ 验证者（绿色背景）：评分验证

2. **✅ 通过验证的问答对**
   - 最终结果展示
   - 包含评分信息

3. **⚙️ Prompts 配置**
   - 修改三个Agent的提示词
   - 实时生效，便于测试

---

## 参数配置

### Temperature（生成随机性）

| 值范围 | 效果 | 适用场景 |
|--------|------|----------|
| 0.0-0.3 | 确定性强，输出稳定 | 需要一致性的场景 |
| 0.4-0.7 | 平衡创造性和稳定性 | 通用场景（推荐） |
| 0.8-2.0 | 高度随机，多样化 | 需要创意的场景 |

### 评分阈值（质量筛选）

| 阈值 | 严格程度 | 产出数量 |
|------|----------|----------|
| 9-10分 | 极严格 | 很少 |
| 7-8分 | 严格 | 适中（推荐） |
| 5-6分 | 宽松 | 较多 |
| 1-4分 | 极宽松 | 很多 |

### 最大迭代次数

| 次数 | 耗时 | 适用场景 |
|------|------|----------|
| 3-5次 | 短 | 快速测试 |
| 5-10次 | 中 | 日常使用（推荐） |
| 10-20次 | 长 | 大量数据需求 |

---

## 任务类型

### 1. 逻辑推理类

**特点**：
- 需要多步推理
- 涉及因果分析
- 需要演绎或归纳

**示例**：
```
问：如果A导致B，B导致C，那么A和C之间有什么关系？
答：A会导致C，这是传递关系...
```

### 2. 数值计算类

**特点**：
- 需要数学计算
- 涉及数据分析
- 需要数值推导

**示例**：
```
问：根据文档数据，计算增长率...
答：增长率 = (后值-前值)/前值 = ...
```

### 3. 信息查询类

**特点**：
- 需要查找信息
- 需要整合多处信息
- 需要理解上下文

**示例**：
```
问：文档中提到的三个关键事件是什么？
答：1. 事件A在X年... 2. 事件B在Y年... 3. 事件C在Z年...
```

### 4. 总结摘要类

**特点**：
- 需要概括内容
- 需要提炼核心
- 需要压缩信息

**示例**：
```
问：总结文档的核心观点
答：文档主要论述了...核心观点包括...
```

---

## 常见问题

### Q1: 生成的问答对太少怎么办？

**A**: 
1. 降低评分阈值（如从7.0降到6.0）
2. 增加最大迭代次数
3. 调整Prompts使其更容易通过验证

### Q2: 生成速度慢怎么办？

**A**:
1. 使用更快的API（如Kimi、Qwen）
2. 减少最大迭代次数
3. 优化文档长度

### Q3: 如何提高问答对质量？

**A**:
1. 提高评分阈值（如设置为8.0）
2. 优化文档质量和结构
3. 在Prompts配置中细化要求

### Q4: 可以中途停止吗？

**A**:
可以，点击"⏹️ 停止"按钮，系统会保存已生成的有效问答对。

### Q5: 支持哪些LLM？

**A**:
支持OpenAI兼容的所有API：
- OpenAI GPT-4/GPT-3.5
- 通义千问（Qwen）
- Moonshot Kimi
- 其他OpenAI兼容API

### Q6: 输出文件在哪里？

**A**:
- 界面下载：点击下载按钮
- 文件位置：`data/outputs/qa_pairs_*.json`

### Q7: 如何批量处理多个文档？

**A**:
请参考[开发指南](DEVELOPER_GUIDE.md)使用CLI工具。

---

## 技巧与最佳实践

### 文档准备

✅ **推荐做法**：
- 文档结构清晰，段落分明
- 包含足够的细节和信息
- 去除无关内容和噪音

❌ **避免**：
- 文档过短（<100字）
- 格式混乱，难以理解
- 包含大量无关信息

### 参数设置

✅ **推荐组合**：

| 场景 | Temperature | 阈值 | 迭代次数 |
|------|-------------|------|----------|
| 高质量数据 | 0.5 | 8.0 | 15 |
| 平衡质量与数量 | 0.7 | 7.0 | 10 |
| 大量数据 | 0.9 | 6.0 | 20 |

### Prompts调整

如果默认Prompts效果不佳，可以：
1. 在"⚙️ Prompts配置"中修改
2. 明确指定生成要求
3. 添加具体示例
4. 调整评分标准

---

## 联系与支持

遇到问题？
- 查看[开发指南](DEVELOPER_GUIDE.md)
- 提交[GitHub Issue](https://github.com/your-repo/issues)
- 查看日志文件：`logs/web_ui_*.log`
